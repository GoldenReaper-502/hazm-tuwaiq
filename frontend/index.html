<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hazm Tuwaiq โ ููุตุฉ ุฅุฏุงุฑุฉ ุงููุฎุงุทุฑ ูุงูุณูุงูุฉ</title>
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="bg"></div>

  <header class="header">
    <div class="brand">
      <img class="logo" src="./assets/logo.png?v=2" alt="Hazm Tuwaiq Logo" />
      <div class="brand-text">
        <h1>ุญุฒู ุทููู</h1>
        <p class="subtitle">ุจุงูุญุฒู ููุงุฌู ุงููุฎุงุทุฑ... ูุจุทููู ูุตูุฏ</p>
      </div>
    </div>

    <div class="cfg">
      <div class="field">
        <label for="apiUrl">API URL</label>
        <input id="apiUrl" type="url" placeholder="https://hazm-tuwaiq-xxxx.onrender.com" />
      </div>

      <div class="field">
        <label for="apiKey">API KEY</label>
        <input id="apiKey" type="text" placeholder="ุงุฎุชูุงุฑู ุฅุฐุง ุนูุฏู ุญูุงูุฉ" />
      </div>

      <button id="saveCfg" class="btn primary">ุญูุธ</button>
      <a href="reset-settings.html" class="btn" style="text-align: center; text-decoration: none; margin-top: 8px; background: #f44336; color: white;">๐ง ุฅุนุงุฏุฉ ุงูุถุจุท</a>
    </div>
  </header>

  <main class="container">
    <!-- System Status Section -->
    <section class="card">
      <div class="card-head">
        <h2>ุญุงูุฉ ุงููุธุงู</h2>
        <button id="refreshStatus" class="btn">ุชุญุฏูุซ</button>
      </div>
      <pre id="statusOut" class="pre muted">ุงุถุบุท "ุชุญุฏูุซ" ูุนุฑุถ ุงูุญุงูุฉ</pre>
    </section>

    <!-- Camera & Detection Section -->
    <section class="card">
      <div class="card-head">
        <h2>๐ท ุงููุงููุฑุง ูุงููุดู</h2>
      </div>

      <div id="cameraStatus" class="status-badge">
        <span id="cameraStatusText">ุบูุฑ ูุชุตู</span>
      </div>

      <!-- Camera Controls -->
      <div class="controls">
        <div class="field">
          <label for="deviceSelect">ุงุฎุชุฑ ุฌูุงุฒ ุงููุงููุฑุง</label>
          <select id="deviceSelect">
            <option value="">ุฌุงุฑู ุงูุจุญุซ...</option>
          </select>
        </div>

        <div class="actions">
          <button id="startCamera" class="btn success">ุงุจุฏุฃ ุงููุงููุฑุง</button>
          <button id="stopCamera" class="btn danger" disabled>ุฃููู ุงููุงููุฑุง</button>
          <button id="retryCamera" class="btn" disabled>ุฅุนุงุฏุฉ ูุญุงููุฉ</button>
        </div>
      </div>

      <!-- Video Preview -->
      <div id="videoContainer" class="video-container" style="display:none;">
        <video id="cameraVideo" autoplay playsinline muted></video>
        <canvas id="detectionCanvas"></canvas>
      </div>

      <!-- Detection Controls -->
      <div class="controls">
        <label class="checkbox">
          <input id="enableDetection" type="checkbox" />
          ุชูุนูู ุงููุดู ุงูุชููุงุฆู
        </label>
        <span id="detectionStats" class="text-muted">ูุนูููุงุช ุงููุดู ุชุธูุฑ ููุง</span>
      </div>

      <!-- Detection Results -->
      <div id="detectionResult" class="info-box" style="display:none;">
        <h3>ูุชุงุฆุฌ ุงููุดู ุงูุฃุฎูุฑุฉ</h3>
        <pre id="detectionOutput" class="pre muted"></pre>
        <button id="askAboutDetection" class="btn primary">ุงุณุฃู ุนู ูุฐุง ุงููุดู</button>
      </div>

      <pre id="cameraError" class="pre muted" style="display:none;"></pre>
    </section>

    <!-- Chat Section -->
    <section class="card">
      <div class="card-head">
        <h2>๐ฌ ุงูุฏุฑุฏุดุฉ ูุงูุฃุณุฆูุฉ</h2>
        <button id="clearChat" class="btn danger">ูุณุญ ุงูุฏุฑุฏุดุฉ</button>
      </div>

      <!-- Chat Messages -->
      <div id="chatMessages" class="chat-box"></div>

      <!-- Chat Input -->
      <div class="chat-input-group">
        <textarea 
          id="chatInput" 
          class="chat-input" 
          placeholder="ุงุณุฃู ุณุคุงูู ููุง..."
          rows="2"
        ></textarea>
        <button id="sendChat" class="btn primary">ุฅุฑุณุงู</button>
      </div>

      <div id="chatStatus" class="text-muted" style="margin-top: 10px;"></div>
    </section>

    <!-- Incidents Section -->
    <section class="card">
      <div class="card-head">
        <h2>ุฅุถุงูุฉ ุญุงุฏุซ / ุจูุงุบ</h2>
      </div>

      <div class="grid">
        <div class="field">
          <label for="incTitle">ุงูุนููุงู</label>
          <input id="incTitle" type="text" placeholder="ูุซุงู: ุงูุฒูุงู ูู ุงูููุฑ" />
        </div>

        <div class="field">
          <label for="incLocation">ุงููููุน</label>
          <input id="incLocation" type="text" placeholder="ูุซุงู: Gate 3" />
        </div>

        <div class="field">
          <label for="incSeverity">ุงูุฎุทูุฑุฉ</label>
          <select id="incSeverity">
            <option value="low">ููุฎูุถุฉ</option>
            <option value="medium" selected>ูุชูุณุทุฉ</option>
            <option value="high">ุนุงููุฉ</option>
            <option value="critical">ุญุฑุฌุฉ</option>
          </select>
        </div>

        <div class="field full">
          <label for="incDesc">ุงููุตู</label>
          <textarea id="incDesc" rows="3" placeholder="ุงูุชุจ ุชูุงุตูู ุงูุจูุงุบ..."></textarea>
        </div>
      </div>

      <div class="actions">
        <button id="sendIncident" class="btn primary">ุฅุฑุณุงู</button>
      </div>

      <pre id="incOut" class="pre muted">ุณูุธูุฑ ุงูุฑุฏ ููุง</pre>
    </section>

    <!-- Incidents List -->
    <section class="card">
      <div class="card-head">
        <h2>ูุงุฆูุฉ ุงูุจูุงุบุงุช</h2>
        <button id="refreshIncidents" class="btn">ุชุญุฏูุซ</button>
      </div>
      <div id="incidentsWrap" class="list"></div>
    </section>

    <!-- Upload Section -->
    <section class="card">
      <div class="card-head">
        <h2>ุฑูุน ููู</h2>
      </div>

      <div class="grid">
        <div class="field">
          <label for="uploadTag">Tag (ุงุฎุชูุงุฑู)</label>
          <input id="uploadTag" type="text" placeholder="ูุซุงู: photo / report" />
        </div>

        <div class="field full">
          <label for="uploadFile">ุงุฎุชุฑ ููู</label>
          <input id="uploadFile" type="file" />
        </div>
      </div>

      <div class="actions">
        <button id="doUpload" class="btn primary">ุฑูุน</button>
      </div>

      <pre id="uploadOut" class="pre muted">ุณูุธูุฑ ุงูุฑุฏ ููุง</pre>
      <div id="uploadsWrap" class="list"></div>
    </section>
  </main>

  <footer class="footer">
    <span>ยฉ Hazm Tuwaiq MVP</span>
    <a href="#" id="openDocs">Docs</a>
  </footer>

  <script src="./app.js"></script>
</body>
</html>