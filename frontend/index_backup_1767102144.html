<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญุฒู ุทููู | HAZM TUWAIQ - AI Safety & Governance Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
        <span class="theme-icon">๐</span>
    </button>
    
    <!-- Language Toggle -->
    <button class="lang-toggle" id="langToggle">
        <span id="langText">EN</span>
    </button>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo">
                        <svg width="50" height="50" viewBox="0 0 50 50">
                            <circle cx="25" cy="25" r="23" fill="none" stroke="var(--ht-accent)" stroke-width="2"/>
                            <path d="M15 25 L25 15 L35 25 L25 35 Z" fill="var(--ht-accent)"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="platform-name" data-i18n="platform_name">ุญุฒู ุทููู</h1>
                        <p class="platform-tagline" data-i18n="platform_tagline">AI Safety & Governance Platform</p>
                    </div>
                </div>
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span class="status-text" data-i18n="checking">ุฌุงุฑู ุงููุญุต...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content">
        <div class="container">
            
            <!-- Backend Status Module -->
            <section class="module-card" id="statusModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐</span>
                        <span data-i18n="system_status">ุญุงูุฉ ุงููุธุงู</span>
                    </h2>
                    <button class="btn-icon" id="refreshStatus" data-i18n-title="refresh">
                        <span>๐</span>
                    </button>
                </div>
                <div class="module-body">
                    <div class="status-grid" id="statusGrid">
                        <div class="status-item">
                            <span class="status-label" data-i18n="backend">ุงูุฎูููุฉ</span>
                            <span class="status-value" id="backendStatus">...</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label" data-i18n="llm_status">ุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                            <span class="status-value" id="llmStatus">...</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label" data-i18n="cctv_status">ูุงููุฑุงุช ุงููุฑุงูุจุฉ</span>
                            <span class="status-value" id="cctvStatus">...</span>
                        </div>
                    </div>
                    <div class="system-info" id="systemInfo"></div>
                </div>
            </section>

            <!-- CCTV Module -->
            <section class="module-card" id="cctvModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐น</span>
                        <span data-i18n="cctv_module">ูุธุงู ูุงููุฑุงุช ุงููุฑุงูุจุฉ</span>
                    </h2>
                </div>
                <div class="module-body">
                    <div class="form-group">
                        <label class="form-label" data-i18n="rtsp_url">ุฑุงุจุท RTSP:</label>
                        <input type="text" class="form-input" id="rtspUrl" placeholder="rtsp://username:password@ip:port/stream">
                    </div>
                    <div class="button-group">
                        <button class="btn btn-primary" id="startCCTV" data-i18n="start_camera">ุจุฏุก ุงููุงููุฑุง</button>
                        <button class="btn btn-secondary" id="stopCCTV" disabled data-i18n="stop_camera">ุฅููุงู ุงููุงููุฑุง</button>
                    </div>
                    <div class="camera-list" id="cameraList"></div>
                    <div class="info-message" id="cctvInfo"></div>
                </div>
            </section>

            <!-- Live Detection Module -->
            <section class="module-card" id="detectionModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐ฏ</span>
                        <span data-i18n="detection_module">ูุดู ุงููุงุฆูุงุช ุงููุจุงุดุฑ</span>
                    </h2>
                </div>
                <div class="module-body">
                    <div class="upload-zone" id="uploadZone">
                        <input type="file" id="imageInput" accept="image/*" hidden>
                        <label for="imageInput" class="upload-label">
                            <span class="upload-icon">๐</span>
                            <span data-i18n="choose_image">ุงุฎุชุฑ ุตูุฑุฉ ูููุดู</span>
                        </label>
                    </div>
                    <div class="image-preview" id="imagePreview"></div>
                    <button class="btn btn-primary btn-block" id="detectBtn" disabled data-i18n="detect">ูุดู ุงููุงุฆูุงุช</button>
                    <div class="detection-result" id="detectionResult"></div>
                </div>
            </section>

            <!-- Alerts Module -->
            <section class="module-card" id="alertsModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐จ</span>
                        <span data-i18n="alerts_module">ุงูุชูุจููุงุช ูุงูุฅุฌุฑุงุกุงุช</span>
                    </h2>
                    <button class="btn-icon" id="refreshAlerts">
                        <span>๐</span>
                    </button>
                </div>
                <div class="module-body">
                    <div class="alerts-list" id="alertsList"></div>
                </div>
            </section>

            <!-- Reports Module -->
            <section class="module-card" id="reportsModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐</span>
                        <span data-i18n="reports_module">ุงูุชูุงุฑูุฑ ูุงูุญูุงุฏุซ</span>
                    </h2>
                </div>
                <div class="module-body">
                    <div class="tabs">
                        <button class="tab active" data-tab="incident" data-i18n="incident_tab">ุญุงุฏุซ</button>
                        <button class="tab" data-tab="near-miss" data-i18n="near_miss_tab">ุดุจู ุญุงุฏุซ</button>
                    </div>
                    <div class="tab-content" id="incidentForm">
                        <div class="form-group">
                            <label class="form-label" data-i18n="title">ุงูุนููุงู:</label>
                            <input type="text" class="form-input" id="incidentTitle">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="location">ุงููููุน:</label>
                            <input type="text" class="form-input" id="incidentLocation">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="severity">ุงูุฎุทูุฑุฉ:</label>
                            <select class="form-select" id="incidentSeverity">
                                <option value="low" data-i18n="low">ููุฎูุถุฉ</option>
                                <option value="medium" data-i18n="medium">ูุชูุณุทุฉ</option>
                                <option value="high" data-i18n="high">ุนุงููุฉ</option>
                                <option value="critical" data-i18n="critical">ุญุฑุฌุฉ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="description">ุงููุตู:</label>
                            <textarea class="form-textarea" id="incidentDesc" rows="3"></textarea>
                        </div>
                        <button class="btn btn-primary btn-block" id="submitIncident" data-i18n="submit">ุฅุฑุณุงู</button>
                    </div>
                    <div class="tab-content" id="nearMissForm" style="display:none;">
                        <div class="form-group">
                            <label class="form-label" data-i18n="title">ุงูุนููุงู:</label>
                            <input type="text" class="form-input" id="nearMissTitle">
                        </div>
                        <div class="form-group">
                            <label class="form-label" data-i18n="description">ุงููุตู:</label>
                            <textarea class="form-textarea" id="nearMissDesc" rows="3"></textarea>
                        </div>
                        <button class="btn btn-primary btn-block" id="submitNearMiss" data-i18n="submit">ุฅุฑุณุงู</button>
                    </div>
                    <div class="export-section">
                        <button class="btn btn-secondary" id="exportPDF" data-i18n="export_pdf">ุชุตุฏูุฑ PDF</button>
                        <button class="btn btn-secondary" id="exportExcel" data-i18n="export_excel">ุชุตุฏูุฑ Excel</button>
                    </div>
                </div>
            </section>

            <!-- Admin Module -->
            <section class="module-card" id="adminModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐ฅ</span>
                        <span data-i18n="admin_module">ุฅุฏุงุฑุฉ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช</span>
                    </h2>
                </div>
                <div class="module-body">
                    <div class="form-group">
                        <label class="form-label" data-i18n="role_name">ุงุณู ุงูุฏูุฑ:</label>
                        <input type="text" class="form-input" id="roleName">
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="permissions">ุงูุตูุงุญูุงุช:</label>
                        <div class="permissions-grid" id="permissionsGrid">
                            <label><input type="checkbox" value="read"> <span data-i18n="read">ูุฑุงุกุฉ</span></label>
                            <label><input type="checkbox" value="write"> <span data-i18n="write">ูุชุงุจุฉ</span></label>
                            <label><input type="checkbox" value="delete"> <span data-i18n="delete">ุญุฐู</span></label>
                            <label><input type="checkbox" value="admin"> <span data-i18n="admin">ุฅุฏุงุฑุฉ</span></label>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-block" id="createRole" data-i18n="create_role">ุฅูุดุงุก ุฏูุฑ</button>
                    <div class="roles-list" id="rolesList"></div>
                </div>
            </section>

            <!-- Chat Module -->
            <section class="module-card" id="chatModule">
                <div class="module-header">
                    <h2>
                        <span class="module-icon">๐ฌ</span>
                        <span data-i18n="chat_module">ูุณุงุนุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</span>
                    </h2>
                    <div class="header-actions">
                        <label class="checkbox-label">
                            <input type="checkbox" id="attachDetection">
                            <span data-i18n="attach_detection">ุฅุฑูุงู ูุชูุฌุฉ ุงููุดู</span>
                        </label>
                        <button class="btn-icon" id="clearChat" data-i18n-title="clear_chat">
                            <span>๐๏ธ</span>
                        </button>
                    </div>
                </div>
                <div class="module-body">
                    <div class="chat-messages" id="chatMessages"></div>
                    <div class="chat-input-group">
                        <textarea class="chat-input" id="chatInput" rows="2" placeholder="ุงุณุฃู ุนู ุฃู ููุถูุน ูุชุนูู ุจุงูุณูุงูุฉ..." data-i18n-placeholder="chat_placeholder"></textarea>
                        <button class="btn btn-primary" id="sendChat" data-i18n="send">ุฅุฑุณุงู</button>
                        <button class="btn btn-secondary retry-btn" id="retryChat" style="display:none;" data-i18n="retry">ุฅุนุงุฏุฉ ุงููุญุงููุฉ</button>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 data-i18n="platform_name">ุญุฒู ุทููู</h3>
                    <p data-i18n="footer_desc">ููุตุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ููุฃูู ูุงูุญูููุฉ</p>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="backend">ุงูุฎูููุฉ</h4>
                    <p class="backend-url">
                        <a href="https://hazm-tuwaiq-3.onrender.com" target="_blank">
                            hazm-tuwaiq-3.onrender.com
                        </a>
                    </p>
                </div>
                <div class="footer-section">
                    <h4 data-i18n="version">ุงูุฅุตุฏุงุฑ</h4>
                    <p>v4.0.0 Golden</p>
                    <p class="copyright">2025 ยฉ HAZM TUWAIQ</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
